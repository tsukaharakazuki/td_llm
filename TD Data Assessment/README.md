# TD Data Assessment

## 概要
このプロジェクトは、Treasure Data（TD）内のデータベースにアクセスし、テーブル定義書を自動生成するLLMエージェントシステムです。テーブルの詳細情報、サンプルデータ、NULL率などを含む包括的なレポートを作成します。

## 機能
- データベース内のテーブル一覧の取得
- テーブルのカラム定義の詳細取得
- サンプルデータの収集
- NULL率の計算
- 個人情報・機密情報の識別と分析
- マスキング・暗号化の推奨事項

## エージェント構成

### メインエージェント: TD Data Assessment
- 全体のワークフローを管理
- ユーザーとのインタラクション処理
- サブエージェントの呼び出し
- 最終レポートの生成（Markdown形式およびPlotly表形式）

### サブエージェント1: Sample Data Retriever
- 指定されたテーブルからサンプルデータを取得
- NULL値が含まれる場合は代替サンプルを検索

### サブエージェント2: Null Data Retriever
- 各カラムのNULL率を計算
- 空文字も含めたNULL分析を実施

## 使用方法
1. エージェントを起動します
2. 使用するデータベースを指定します
3. テーブル一覧から分析対象のテーブルを選択します
4. 詳細なテーブル定義レポートが生成されます

## 出力形式
レポートは以下のセクションを含みます：

### 1. テーブル概要
テーブル名と概要説明を表形式で出力します。Markdown形式とPlotly表形式の両方で表示されます。

### 2. カラム定義
以下の情報を含む詳細なカラム情報を表形式で出力します：
- カラム名
- データ型
- 説明
- NULL率
- サンプルデータ
- 個人情報リスク評価
- 機密情報リスク評価
- マスキング/暗号化の推奨
- 推奨理由

### 3. 補足説明
テーブルに関する追加情報を箇条書きで提供します。

### 4. データの傾向と注意点
データ分析から得られた洞察や利用時の注意点を箇条書きで提供します。

## 技術仕様
- LLMモデル: Claude 3.5 Sonnet
- 温度設定: 0.0（一貫性のある出力のため）
- 表示形式: Markdown + Plotly表形式
- 最大ツール呼び出し回数: 20
